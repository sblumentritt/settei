diff --git a/main.lua b/main.lua
index 9bbd8a1f..c4cd2c1b 100644
--- a/main.lua
+++ b/main.lua
@@ -1,7 +1,8 @@
 local currentPath = debug.getinfo(1, 'S').source:sub(2)
 local rootPath = currentPath:gsub('[/\\]*[^/\\]-$', '')
-loadfile((rootPath == '' and '.' or rootPath) .. '/platform.lua')('script')
+loadfile(rootPath .. '/platform.lua')('script')
 local fs = require 'bee.filesystem'
+local math = require 'math'
 
 local function expanduser(path)
     if path:sub(1, 1) == '~' then
@@ -34,8 +35,9 @@ end
 loadArgs()
 
 ROOT     = fs.path(expanduser(rootPath))
-LOGPATH  = LOGPATH  and expanduser(LOGPATH)  or (ROOT:string() .. '/log')
-METAPATH = METAPATH and expanduser(METAPATH) or (ROOT:string() .. '/meta')
+TMP_ROOT = fs.path('/tmp/lua-language-server.' .. math.random(1000, 9000))
+LOGPATH  = LOGPATH  and expanduser(LOGPATH)  or (TMP_ROOT:string() .. '/log')
+METAPATH = METAPATH and expanduser(METAPATH) or (TMP_ROOT:string() .. '/meta')
 
 debug.setcstacklimit(200)
 collectgarbage('generational', 10, 100)
diff --git a/make.lua b/make.lua
index ee733c2c..8f3ca9f0 100644
--- a/make.lua
+++ b/make.lua
@@ -57,6 +57,4 @@ lm:build 'unittest' {
 
 lm:default {
     'install',
-    'test',
-    'unittest',
 }
diff --git a/platform.lua b/platform.lua
index 6c9d7c09..77e45c35 100644
--- a/platform.lua
+++ b/platform.lua
@@ -31,13 +31,7 @@ end
 
 local currentPath = debug.getinfo(1, 'S').source:sub(2)
 local fs = require 'bee.filesystem'
-local rootPath = fs.path(currentPath):remove_filename():string()
-if dll == '.dll' then
-    rootPath = rootPath:gsub('/', '\\')
-    package.path  = rootPath .. script .. '\\?.lua'
-          .. ';' .. rootPath .. script .. '\\?\\init.lua'
-else
-    rootPath = rootPath:gsub('\\', '/')
-    package.path  = rootPath .. script .. '/?.lua'
-          .. ';' .. rootPath .. script .. '/?/init.lua'
-end
+local rootPath = fs.path(currentPath):remove_filename()
+
+package.path = tostring(rootPath / script / '?.lua')
+     .. ';' .. tostring(rootPath / script / '?' / 'init.lua')
diff --git a/script/library.lua b/script/library.lua
index 09b14d25..6225747b 100644
--- a/script/library.lua
+++ b/script/library.lua
@@ -145,7 +145,7 @@ local function compileSingleMetaDoc(script, metaLang)
         end,
     }, { __index = _ENV })
 
-    util.saveFile((ROOT / 'log' / 'middleScript.lua'):string(), middleScript)
+    util.saveFile((TMP_ROOT / 'log' / 'middleScript.lua'):string(), middleScript)
 
     assert(load(middleScript, middleScript, 't', env))()
     return table.concat(compileBuf)
